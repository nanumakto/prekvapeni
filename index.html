<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<title>Překvapení</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{margin:0;overflow:hidden;font-family:Arial,sans-serif;background:#000;}
.stage{position:fixed;inset:0;background:url('https://cafevlese.cz/wp-content/uploads/2022/05/4-1024x683.jpg') center/cover no-repeat;z-index:0;}

/* OPONA */
.curtain-wrapper{position:fixed;inset:0;z-index:20;display:flex;cursor:pointer;}
.curtain-left,.curtain-right{
  width:50%;height:100%;
  background:repeating-linear-gradient(90deg,#5a0000,#7b0000 12px,#8b0000 24px);
  transition:transform 2.8s ease-in-out;
}
.curtain-wrapper.open .curtain-left{transform:translateX(-100%);}  
.curtain-wrapper.open .curtain-right{transform:translateX(100%);}  

/* OBÁLKA */
.envelope{position:absolute;top:-220px;left:50%;transform:translateX(-50%);width:260px;height:170px;display:none;cursor:pointer;z-index:10;}
.envelope.show{display:block;animation:fall 1.4s forwards;}
@keyframes fall{to{top:60%;}}
.envelope .body{position:absolute;inset:0;background:#f6f1e8;border-radius:8px;box-shadow:0 20px 40px rgba(0,0,0,.45);} 
.envelope .flap{position:absolute;top:0;left:0;right:0;height:55%;background:#efe6d8;clip-path:polygon(0 0,100% 0,50% 100%);transform-origin:top;transition:transform 1.2s ease;z-index:11;}
.envelope.open .flap{transform:rotateX(-160deg);} 

/* FOTKA – VYJÍŽDÍ Z OBÁLKY A ZVĚTŠUJE SE */
.photo{
  position:absolute;
  width:120px;
  height:208px;
  left:50%;
  top:calc(60% + 40px);
  transform:translateX(-50%) translateY(0) scale(0.4);
  opacity:0;
  z-index:12;
  background:url('https://static.wixstatic.com/media/f367ba_caa1f2aefcc041249f46cab85e210eae~mv2.jpg/v1/fill/w_320,h_555,al_c,q_80,usm_0.66_1.00_0.01,enc_avif,quality_auto/WEBPOSTER.jpg') center/cover no-repeat;
  box-shadow:0 30px 60px rgba(0,0,0,.6);
  transition:transform 1.8s ease, opacity 1.2s ease;
}
.photo.show{
  opacity:1;
  transform:translateX(-50%) translateY(-260px) scale(1);
}

</style>
</head>
<body>

<div class="stage"></div>

<div class="curtain-wrapper" id="curtain">
  <div class="curtain-left"></div>
  <div class="curtain-right"></div>
</div>

<div class="envelope" id="envelope">
  <div class="body"></div>
  <div class="flap"></div>
</div>

<div class="photo" id="photo"></div>

<!-- ZVUK OPONY – PIXABAY (PŘÍMÝ MP3) -->
<audio id="curtainSound" preload="auto" src="https://cdn.pixabay.com/download/audio/2022/11/25/audio_82308.mp3?filename=curtain-82308.mp3"></audio>

<!-- HUDBA -->
<iframe id="music" width="0" height="0" allow="autoplay"></iframe>

<script>
const curtain=document.getElementById('curtain');
const envelope=document.getElementById('envelope');
const photo=document.getElementById('photo');
const curtainSound=document.getElementById('curtainSound');
const music=document.getElementById('music');
let stage=0;

curtain.addEventListener('click',()=>{
  if(stage!==0) return;
  stage=1;

  // zvuk MUSÍ být okamžitě po kliku
  curtainSound.currentTime=0;
  curtainSound.muted=false;
  curtainSound.play().catch(err=>{console.log(err);});

  curtain.classList.add('open');
  setTimeout(()=>{
    curtain.style.pointerEvents='none';
    envelope.classList.add('show');
  },2800);
});

envelope.addEventListener('click',()=>{
  if(stage!==1) return;
  stage=2;
  envelope.classList.add('open');

  setTimeout(()=>{
    photo.classList.add('show');
    // obálka jde za fotku
    envelope.style.zIndex=5;
    music.src='https://www.youtube.com/embed/wD9VaHV0-cs?autoplay=1';
  },800);
});
</script>

</body>
</html>
